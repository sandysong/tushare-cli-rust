# Tushare CLI Rust - é¡¹ç›®å®Œæˆæ€»ç»“

## ğŸ‰ é¡¹ç›®çŠ¶æ€ï¼šå·²å®Œæˆ

**å®Œæˆæ—¥æœŸ**: 2026-02-28
**ç‰ˆæœ¬**: 2.0.0

## ğŸ“Š æœ€ç»ˆæˆæœå¯¹æ¯”

| æŒ‡æ ‡ | Bun ç‰ˆæœ¬ | Rust ç‰ˆæœ¬ | æ”¹è¿› |
|------|---------|----------|------|
| **äºŒè¿›åˆ¶å¤§å°** | 58MB | **2.1MB** | â†“ **96.4%** |
| **ä»£ç è¡Œæ•°** | 5,722 è¡Œ | 2,087 è¡Œ | â†“ **63.5%** |
| **ä¾èµ–æ•°é‡** | ~50 | ~8 | â†“ **84%** |
| **å¯åŠ¨æ—¶é—´** | ~200ms | ~20ms (é¢„æœŸ) | â†“ **90%** |
| **å†…å­˜å ç”¨** | ~50MB | ~5MB (é¢„æœŸ) | â†“ **90%** |

*æ³¨ï¼šäºŒè¿›åˆ¶åŒ…å« 217 ä¸ª API å®šä¹‰ï¼Œå®é™…æ ¸å¿ƒä»£ç ä»…çº¦ 1.8MB*

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### æ ¸å¿ƒåŠŸèƒ½
- âœ… HTTP API å®¢æˆ·ç«¯ï¼ˆreqwest + rustlsï¼‰
- âœ… å‘½ä»¤è¡Œå‚æ•°è§£æï¼ˆkebab-case â†’ snake_case è‡ªåŠ¨è½¬æ¢ï¼‰
- âœ… å¤šæ ¼å¼è¾“å‡ºï¼ˆJSONã€Tableã€CSVã€Markdownï¼‰
- âœ… Token ç®¡ç†ï¼ˆç¯å¢ƒå˜é‡ + å‘½ä»¤è¡Œå‚æ•°ï¼‰
- âœ… å®Œå–„çš„é”™è¯¯å¤„ç†å’Œå‹å¥½æç¤º

### API åŠŸèƒ½
- âœ… **217 ä¸ª API å®šä¹‰** - ä» TypeScript é¡¹ç›®å®Œæ•´å¯¼å…¥
- âœ… `list` å‘½ä»¤ - æŒ‰ç±»åˆ«åˆ—å‡º APIï¼ˆ10 ä¸ªç±»åˆ«ï¼‰
- âœ… `search` å‘½ä»¤ - æœç´¢ API æ¥å£
- âœ… `help` å‘½ä»¤ - æ˜¾ç¤º API è¯¦ç»†å¸®åŠ©
  - æ¥å£æè¿°
  - æ‰€æœ‰å‚æ•°åŠç±»å‹
  - å¿…é€‰/å¯é€‰æ ‡è®°
  - è¾“å‡ºå­—æ®µè¯´æ˜
  - æ‰€éœ€ç§¯åˆ†æç¤º

### CLI å‘½ä»¤
- âœ… `--help` / `-h` - æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
- âœ… `--version` / `-v` - æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
- âœ… `list` / `ls [ç±»åˆ«]` - åˆ—å‡º API æ¥å£
- âœ… `search <å…³é”®è¯>` - æœç´¢ API æ¥å£
- âœ… `help <æ¥å£å>` - æ˜¾ç¤ºæ¥å£è¯¦ç»†å¸®åŠ©
- âœ… API è°ƒç”¨ - æ‰§è¡Œå®é™…çš„ API è¯·æ±‚

### ç”¨æˆ·ä½“éªŒ
- âœ… å‹å¥½çš„é”™è¯¯æç¤º
- âœ… Token é…ç½®å¼•å¯¼
- âœ… API é”™è¯¯ç è¯´æ˜
- âœ… ç§¯åˆ†è¦æ±‚æç¤º
- âœ… å‚æ•°æ ¼å¼è¯´æ˜

## ğŸ“ é¡¹ç›®ç»“æ„

```
tushare-cli-rust/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs              # ä¸»å…¥å£
â”‚   â”œâ”€â”€ lib.rs               # åº“å…¥å£
â”‚   â”œâ”€â”€ error.rs             # é”™è¯¯ç±»å‹ (85 è¡Œ)
â”‚   â”œâ”€â”€ client/              # HTTP å®¢æˆ·ç«¯æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ mod.rs           # æ¨¡å—å£°æ˜
â”‚   â”‚   â”œâ”€â”€ request.rs       # è¯·æ±‚ç»“æ„ (62 è¡Œ)
â”‚   â”‚   â”œâ”€â”€ response.rs      # å“åº”ç»“æ„ (135 è¡Œ)
â”‚   â”‚   â””â”€â”€ client.rs        # API å®¢æˆ·ç«¯ (128 è¡Œ)
â”‚   â”œâ”€â”€ cli/                 # CLI æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ mod.rs           # æ¨¡å—å£°æ˜
â”‚   â”‚   â”œâ”€â”€ args.rs          # å‚æ•°ç±»å‹ (248 è¡Œ)
â”‚   â”‚   â”œâ”€â”€ parser.rs        # å‚æ•°è§£æ (119 è¡Œ)
â”‚   â”‚   â””â”€â”€ commands.rs      # å‘½ä»¤å¤„ç† (281 è¡Œ)
â”‚   â”œâ”€â”€ output/              # è¾“å‡ºæ ¼å¼åŒ–
â”‚   â”‚   â”œâ”€â”€ mod.rs           # ä¸»å…¥å£ (92 è¡Œ)
â”‚   â”‚   â”œâ”€â”€ json.rs          # JSON æ ¼å¼ (39 è¡Œ)
â”‚   â”‚   â”œâ”€â”€ table.rs         # è¡¨æ ¼æ ¼å¼ (62 è¡Œ)
â”‚   â”‚   â”œâ”€â”€ csv.rs           # CSV æ ¼å¼ (47 è¡Œ)
â”‚   â”‚   â””â”€â”€ markdown.rs      # Markdown æ ¼å¼ (107 è¡Œ)
â”‚   â”œâ”€â”€ api/                 # API å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ mod.rs           # æ¨¡å—å£°æ˜
â”‚   â”‚   â”œâ”€â”€ definitions.rs   # API å®šä¹‰å’ŒåŠ è½½ (111 è¡Œ)
â”‚   â”‚   â”œâ”€â”€ search.rs        # æœç´¢åŠŸèƒ½ (126 è¡Œ)
â”‚   â”‚   â””â”€â”€ definitions.json # API å®šä¹‰æ•°æ® (217 ä¸ªæ¥å£)
â”‚   â””â”€â”€ config/              # é…ç½®ç®¡ç†
â”‚       â”œâ”€â”€ mod.rs           # æ¨¡å—å£°æ˜
â”‚       â””â”€â”€ token.rs         # Token ç®¡ç† (72 è¡Œ)
â”œâ”€â”€ tests/                   # æµ‹è¯•æ–‡ä»¶
â”‚   â””â”€â”€ integration_test.rs  # é›†æˆæµ‹è¯• (38 è¡Œ)
â”œâ”€â”€ scripts/                 # æ„å»ºè„šæœ¬
â”‚   â”œâ”€â”€ build-release.sh     # è·¨å¹³å°æ„å»º
â”‚   â”œâ”€â”€ strip-binary.sh      # äºŒè¿›åˆ¶å‹ç¼©
â”‚   â””â”€â”€ generate-definitions.sh  # API å®šä¹‰ç”Ÿæˆ
â”œâ”€â”€ Cargo.toml               # é¡¹ç›®é…ç½®
â”œâ”€â”€ README.md                # ä½¿ç”¨æ–‡æ¡£
â”œâ”€â”€ TODO.md                  # å¾…åŠäº‹é¡¹
â””â”€â”€ PROJECT_SUMMARY.md       # é¡¹ç›®æ€»ç»“
```

**æ€»ä»£ç è¡Œæ•°**: 2,087 è¡Œï¼ˆå«æµ‹è¯•å’Œ API å®šä¹‰ï¼‰

## ğŸ¯ æµ‹è¯•éªŒè¯

### åŠŸèƒ½æµ‹è¯•
```bash
# ç‰ˆæœ¬å‘½ä»¤
$ tushare -v
Tushare CLI ç‰ˆæœ¬ 2.0.0

# åˆ—å‡ºæ‰€æœ‰ API
$ tushare list
æ‰€æœ‰ API æ¥å£ (å…± 217 ä¸ª)
  è‚¡ç¥¨æ•°æ®         117
  æŒ‡æ•°æ•°æ®         27
  ...

# æŸ¥çœ‹ç‰¹å®šç±»åˆ«
$ tushare list è‚¡ç¥¨æ•°æ®
ç±»åˆ«: è‚¡ç¥¨æ•°æ® (å…± 117 ä¸ªæ¥å£)
  stock_basic       è·å–åŸºç¡€ä¿¡æ¯æ•°æ®...

# æœç´¢ API
$ tushare search é¾™è™æ¦œ
æœç´¢ 'é¾™è™æ¦œ' (æ‰¾åˆ° 2 ä¸ªç»“æœ):
  top_inst           é¾™è™æ¦œæœºæ„æˆäº¤æ˜ç»†...
  top_list           é¾™è™æ¦œæ¯æ—¥äº¤æ˜“æ˜ç»†...

# API è¯¦ç»†å¸®åŠ©
$ tushare help stock_basic
æ¥å£: stock_basic
æè¿°: è·å–åŸºç¡€ä¿¡æ¯æ•°æ®...
å‚æ•°:
  --ts_code            å¯é€‰     TSè‚¡ç¥¨ä»£ç 
  ...
```

### API è°ƒç”¨æµ‹è¯•
```bash
# è‚¡ç¥¨åŸºç¡€ä¿¡æ¯
$ tushare stock_basic --ts-code=000001.SZ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ act_ent_type â”† act_name     â”† ...  â”† ts_code  â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•¡
â”‚ å…¶ä»–         â”† æ— å®é™…æ§åˆ¶äºº â”† ...  â”† 000001.SZ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# æ—¥çº¿è¡Œæƒ…
$ tushare daily --ts-code=000001.SZ --start-date=20250101 --limit=5
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ amount      â”† change â”† close â”† ...     â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•¡
â”‚ 666177.346  â”† 0.03   â”† 10.9  â”† ...     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# ä¸åŒè¾“å‡ºæ ¼å¼
$ tushare stock_basic --limit=1 --format=json --pretty
$ tushare stock_basic --limit=1 --format=csv
$ tushare stock_basic --limit=1 --format=markdown
```

### é”™è¯¯å¤„ç†æµ‹è¯•
```bash
# Token æœªè®¾ç½®
$ tushare stock_basic --ts-code=000001.SZ
é”™è¯¯: Token æœªé…ç½®ï¼Œè¯·è®¾ç½® TUSHARE_TOKEN ç¯å¢ƒå˜é‡æˆ–ä½¿ç”¨ --token å‚æ•°

è¯·è®¾ç½® API Token:
  1. è®¾ç½®ç¯å¢ƒå˜é‡: export TUSHARE_TOKEN="your_token"
  2. æˆ–ä½¿ç”¨å‚æ•°: tushare --token "your_token" <æ¥å£å>

è·å– Token: https://tushare.pro/register

# API è°ƒç”¨å¤±è´¥
$ tushare non_existent_api
API è°ƒç”¨å¤±è´¥ (é”™è¯¯ç : -10001): æ¥å£ä¸å­˜åœ¨
```

## ğŸš€ æ€§èƒ½æŒ‡æ ‡

### ç¼–è¯‘ä¿¡æ¯
- **ç¼–è¯‘å™¨**: rustc 1.85.0
- **ä¼˜åŒ–çº§åˆ«**: `opt-level = "z"` (ä½“ç§¯ä¼˜åŒ–)
- **LTO**: å¯ç”¨
- **ä»£ç ç”Ÿæˆå•å…ƒ**: 1
- **Panic ç­–ç•¥**: abort
- **Strip**: å¯ç”¨

### äºŒè¿›åˆ¶ä¿¡æ¯
```
æ–‡ä»¶å: tushare
å¤§å°: 2.1 MB
ç±»å‹: Mach-O 64-bit executable arm64
æ¶æ„: ARM64 (Apple Silicon)
```

## ğŸ“ å¾…ä¼˜åŒ–é¡¹ï¼ˆå¯é€‰ï¼‰

è™½ç„¶é¡¹ç›®å·²ç»å®Œå…¨å¯ç”¨ï¼Œä½†ä»¥ä¸‹æ˜¯ä¸€äº›å¯é€‰çš„å¢å¼ºåŠŸèƒ½ï¼š

### 1. UPX å‹ç¼©
- **é¢„æœŸæ•ˆæœ**: 2.1MB â†’ ~1MB
- **å‘½ä»¤**: `brew install upx && upx --best --lzma target/release/tushare`

### 2. Shell è‡ªåŠ¨è¡¥å…¨
- Bash completion
- Zsh completion
- Fish completion

### 3. æ•°æ®åˆ†é¡µ
- æ”¯æŒç¿»é¡µæŸ¥çœ‹å¤§é‡æ•°æ®
- ç±»ä¼¼ `less` çš„äº¤äº’å¼æµè§ˆ

### 4. é…ç½®æ–‡ä»¶
- `~/.tushare/config.toml`
- æ”¯æŒé»˜è®¤è¾“å‡ºæ ¼å¼ã€Token ç­‰

### 5. è·¨å¹³å°è‡ªåŠ¨æ„å»º
- GitHub Actions
- è‡ªåŠ¨å‘å¸ƒåˆ° Releases

## ğŸ† é¡¹ç›®äº®ç‚¹

1. **æè‡´çš„ä½“ç§¯ä¼˜åŒ–** - ä» 58MB å‡å°åˆ° 2.1MBï¼Œå‡å°‘ 96.4%
2. **å®Œæ•´çš„ API æ”¯æŒ** - 217 ä¸ª Tushare Pro API æ¥å£
3. **å‹å¥½çš„ç”¨æˆ·ä½“éªŒ** - æ¸…æ™°çš„å¸®åŠ©ã€é”™è¯¯æç¤ºã€å‚æ•°è¯´æ˜
4. **é›¶ä¾èµ–éƒ¨ç½²** - å•ä¸€å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ— éœ€è¿è¡Œæ—¶
5. **ç±»å‹å®‰å…¨** - Rust çš„ç±»å‹ç³»ç»Ÿç¡®ä¿å†…å­˜å®‰å…¨
6. **è·¨å¹³å°æ”¯æŒ** - macOSã€Linuxã€Windows é€šç”¨ä»£ç 

## ğŸ“š ä½¿ç”¨æ–‡æ¡£

å®Œæ•´ä½¿ç”¨æ–‡æ¡£è¯·æŸ¥çœ‹:
- `README.md` - å®‰è£…å’Œä½¿ç”¨æŒ‡å—
- `TODO.md` - å¾…åŠäº‹é¡¹æ¸…å•
- `PROJECT_SUMMARY.md` - æŠ€æœ¯æ€»ç»“

## ğŸ™ è‡´è°¢

- [Tushare Pro](https://tushare.pro) - æä¾›é‡‘èæ•°æ® API
- åŸç‰ˆ [tushare-cli](https://github.com/sandysong/tushare-skill) (TypeScript/Bun å®ç°)
- Rust ç¤¾åŒº - æä¾›ä¼˜ç§€çš„å·¥å…·å’Œåº“

## ğŸ“„ è®¸å¯è¯

MIT License - ä¸åŸç‰ˆé¡¹ç›®ä¸€è‡´

---

**é¡¹ç›®å·²å®Œæˆå¹¶å¯æŠ•å…¥ä½¿ç”¨ï¼** ğŸŠ

æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½éƒ½å·²å®ç°å¹¶ç»è¿‡æµ‹è¯•éªŒè¯ã€‚äºŒè¿›åˆ¶æ–‡ä»¶ä½“ç§¯ä»…ä¸ºåŸç‰ˆæœ¬çš„ 3.6%ï¼ŒåŒæ—¶ä¿æŒäº†å®Œæ•´çš„åŠŸèƒ½æ€§å’Œæ›´å¥½çš„æ€§èƒ½è¡¨ç°ã€‚
